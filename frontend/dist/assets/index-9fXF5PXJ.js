import{u as S,r as i,j as e,H as h,F as E,a as L,b as g,c as A,d as C,e as R,f as D}from"./index-4SRNKfH5.js";import F from"./ComplaintModal-Byv4z6rp.js";const U=()=>{const{complaints:d,loading:j,updateComplaintStatus:p}=S(),[a,N]=i.useState(""),[c,y]=i.useState("ALL"),[l,x]=i.useState(null),[f,m]=i.useState(!1),v=s=>{switch(s){case"SUBMITTED":return"bg-gray-100 text-gray-800";case"UNDER_REVIEW":return"bg-yellow-100 text-yellow-800";case"IN_PROGRESS":return"bg-blue-100 text-blue-800";case"RESOLVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";case"ESCALATED":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},t=d==null?void 0:d.filter(s=>{const r=s.title.toLowerCase().includes(a.toLowerCase())||s.description.toLowerCase().includes(a.toLowerCase())||s.location.toLowerCase().includes(a.toLowerCase()),n=c==="ALL"||s.status===c;return r&&n}),b=async s=>{l&&await p(l._id,s)},w=async s=>{},o=s=>{x(s),m(!0)};return j?e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx("div",{className:"flex h-[calc(100vh-64px)] items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-32 w-32 animate-spin rounded-full border-b-2 border-gray-900"}),e.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Loading complaints..."})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx("div",{className:"min-h-[calc(100vh-64px)] bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Agency Staff Dashboard"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage and respond to complaints assigned to your department."})]}),e.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row justify-center gap-4",children:[e.jsxs("div",{className:"relative max-w-md w-full",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(E,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:a,onChange:s=>N(s.target.value),placeholder:"Search complaints...",className:"block w-full rounded-lg border-0 py-3 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"})]}),e.jsxs("div",{className:"relative max-w-md w-full",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(L,{className:"h-5 w-5 text-gray-400"})}),e.jsxs("select",{value:c,onChange:s=>y(s.target.value),className:"block w-full rounded-lg border-0 py-3 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6",children:[e.jsx("option",{value:"ALL",children:"All Statuses"}),e.jsx("option",{value:"SUBMITTED",children:"Submitted"}),e.jsx("option",{value:"UNDER_REVIEW",children:"Under Review"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"RESOLVED",children:"Resolved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"}),e.jsx("option",{value:"ESCALATED",children:"Escalated"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[t==null?void 0:t.map(s=>{var r,n,u;return e.jsx("div",{className:"bg-white rounded-xl border shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:e.jsx(g,{className:"h-6 w-6 text-red-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.title}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s.description})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${v(s.status)}`,children:(r=s.status)==null?void 0:r.replace("_"," ")}),e.jsx("button",{onClick:()=>o(s),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Update Status"})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(A,{className:"h-5 w-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Location"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.location})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(C,{className:"h-5 w-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Submitted On"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(R,{className:"h-5 w-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Handled By"}),e.jsx("p",{className:"text-sm text-gray-900",children:((n=s.handledBy)==null?void 0:n.name)||"Not Assigned"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(D,{className:"h-5 w-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Submitted By"}),e.jsx("p",{className:"text-sm text-gray-900",children:((u=s.submittedBy)==null?void 0:u.name)||"Anonymous"})]})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(s.updatedAt).toLocaleString()]}),e.jsx("button",{onClick:()=>o(s),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Add Response"})]})})]})},s._id)}),(t==null?void 0:t.length)===0&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm",children:[e.jsx(g,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No complaints found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search or filters."})]})]})]})}),l&&e.jsx(F,{isOpen:f,onClose:()=>{m(!1),x(null)},complaint:l,onUpdateStatus:b,onAddResponse:w})]})};export{U as default};
