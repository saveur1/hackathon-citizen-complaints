{"version":3,"sources":["../../../backend/routes/complaint/complaint.model.ts","../../../backend/utils/enums.ts"],"sourcesContent":["import mongoose, { type Document, Schema } from \"mongoose\"\nimport { ComplaintStatus } from \"@/utils/enums\"\n\nexport interface IComplaint extends Document {\n    title: string\n    description: string\n    location: string\n    status: ComplaintStatus\n    createdAt: Date\n    updatedAt: Date\n    submittedBy: mongoose.Types.ObjectId\n    handledBy: mongoose.Types.ObjectId\n    attachments: mongoose.Types.ObjectId[]\n    responses: mongoose.Types.ObjectId[]\n}\n\nconst complaintSchema = new Schema<IComplaint>(\n    {\n        title: {\n            type: String,\n            required: [true, \"Title is required\"],\n            trim: true,\n        },\n        description: {\n            type: String,\n            required: [true, \"Description is required\"],\n        },\n        location: {\n            type: String,\n            required: [true, \"Location is required\"],\n        },\n        status: {\n            type: String,\n            enum: Object.values(ComplaintStatus),\n            default: ComplaintStatus.SUBMITTED,\n        },\n        submittedBy: {\n            type: Schema.Types.ObjectId,\n            ref: \"User\",\n        },\n        handledBy: {\n            type: Schema.Types.ObjectId,\n            ref: \"Agency\",\n        },\n        attachments: [\n        {\n            type: Schema.Types.ObjectId,\n            ref: \"Attachment\",\n        },\n        ],\n        responses: [\n        {\n            type: Schema.Types.ObjectId,\n            ref: \"Response\",\n        },\n        ],\n    },\n    {\n        timestamps: true,\n    },\n)\n\n// Index for faster queries\ncomplaintSchema.index({ category: 1, status: 1 })\ncomplaintSchema.index({ submittedBy: 1 })\ncomplaintSchema.index({ handledBy: 1 })\n\nexport const Complaint = mongoose.model<IComplaint>(\"Complaint\", complaintSchema)\n","export enum UserRole {\n  CITIZEN = \"CITIZEN\",\n  AGENCY_STAFF = \"AGENCY_STAFF\",\n  ADMIN = \"ADMIN\",\n}\n\nexport enum ComplaintStatus {\n  SUBMITTED = \"SUBMITTED\",\n  UNDER_REVIEW = \"UNDER_REVIEW\",\n  IN_PROGRESS = \"IN_PROGRESS\",\n  RESOLVED = \"RESOLVED\",\n  REJECTED = \"REJECTED\",\n  ESCALATED = \"ESCALATED\",\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAgD;;;ACMzC,IAAK,kBAAL,kBAAKA,qBAAL;AACL,EAAAA,iBAAA,eAAY;AACZ,EAAAA,iBAAA,kBAAe;AACf,EAAAA,iBAAA,iBAAc;AACd,EAAAA,iBAAA,cAAW;AACX,EAAAA,iBAAA,cAAW;AACX,EAAAA,iBAAA,eAAY;AANF,SAAAA;AAAA,GAAA;;;ADUZ,IAAM,kBAAkB,IAAI;AAAA,EACxB;AAAA,IACI,OAAO;AAAA,MACH,MAAM;AAAA,MACN,UAAU,CAAC,MAAM,mBAAmB;AAAA,MACpC,MAAM;AAAA,IACV;AAAA,IACA,aAAa;AAAA,MACT,MAAM;AAAA,MACN,UAAU,CAAC,MAAM,yBAAyB;AAAA,IAC9C;AAAA,IACA,UAAU;AAAA,MACN,MAAM;AAAA,MACN,UAAU,CAAC,MAAM,sBAAsB;AAAA,IAC3C;AAAA,IACA,QAAQ;AAAA,MACJ,MAAM;AAAA,MACN,MAAM,OAAO,OAAO,eAAe;AAAA,MACnC;AAAA,IACJ;AAAA,IACA,aAAa;AAAA,MACT,MAAM,uBAAO,MAAM;AAAA,MACnB,KAAK;AAAA,IACT;AAAA,IACA,WAAW;AAAA,MACP,MAAM,uBAAO,MAAM;AAAA,MACnB,KAAK;AAAA,IACT;AAAA,IACA,aAAa;AAAA,MACb;AAAA,QACI,MAAM,uBAAO,MAAM;AAAA,QACnB,KAAK;AAAA,MACT;AAAA,IACA;AAAA,IACA,WAAW;AAAA,MACX;AAAA,QACI,MAAM,uBAAO,MAAM;AAAA,QACnB,KAAK;AAAA,MACT;AAAA,IACA;AAAA,EACJ;AAAA,EACA;AAAA,IACI,YAAY;AAAA,EAChB;AACJ;AAGA,gBAAgB,MAAM,EAAE,UAAU,GAAG,QAAQ,EAAE,CAAC;AAChD,gBAAgB,MAAM,EAAE,aAAa,EAAE,CAAC;AACxC,gBAAgB,MAAM,EAAE,WAAW,EAAE,CAAC;AAE/B,IAAM,YAAY,gBAAAC,QAAS,MAAkB,aAAa,eAAe;","names":["ComplaintStatus","mongoose"]}